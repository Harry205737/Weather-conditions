<!DOCTYPE html><title>W</title><b>3D Forecast</b><br><input id=a placeholder=Lat size=4><input id=b placeholder=Lon size=4><button onclick=g()>Go</button><button onclick=n()>GPS</button><p id=m></p><div id=h style=font-size:10px;overflow-x:auto;white-space:nowrap;background:#eee></div><table border=1 style=border-collapse:collapse;font-size:11px><tbody id=o></tbody></table><script>L=localStorage,a=document.getElementById('a'),b=document.getElementById('b'),a.value=L.la||'',b.value=L.lo||'',W=c=>({0:'SKC',1:'FEW',2:'SCT',3:'OVC',45:'FG',51:'DZ',61:'-RA',63:'RA',65:'+RA',71:'SN',95:'TS'}[c]||'C'+c),n=()=>(m.innerText='...',navigator.geolocation.getCurrentPosition(p=>{a.value=p.coords.latitude.toFixed(2),b.value=p.coords.longitude.toFixed(2),g()},()=>m.innerText='X')),g=async()=>{x=a.value,y=b.value,L.la=x,L.lo=y,m.innerText='...';try{r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${x}&longitude=${y}&hourly=temperature_2m,apparent_temperature,precipitation_probability&daily=weathercode,temperature_2m_max,temperature_2m_min,apparent_temperature_max,apparent_temperature_min,precipitation_sum,precipitation_probability_max,windspeed_10m_max&timezone=auto&forecast_days=3`),j=await r.json(),o.innerHTML='<tr><th>D<th>W<th>T<th>AT<th>P<th>WND',h.innerHTML='';j.hourly.time.slice(0,24).map((t,i)=>h.innerHTML+=`${t.slice(11,13)}00:<b>${Math.round(j.hourly.temperature_2m[i])}</b>(${Math.round(j.hourly.apparent_temperature[i])})/${j.hourly.precipitation_probability[i]}%|`);j.daily.time.map((t,i)=>{r=o.insertRow(),p=t.split('-'),r.innerHTML=`<td>${p[2]}/${p[1]}<td>${W(j.daily.weathercode[i])}<td>${Math.round(j.daily.temperature_2m_max[i])}/${Math.round(j.daily.temperature_2m_min[i])}<td>${Math.round(j.daily.apparent_temperature_max[i])}/${Math.round(j.daily.apparent_temperature_min[i])}<td>${j.daily.precipitation_sum[i]}@${j.daily.precipitation_probability_max[i]}%<td>${Math.round(j.daily.windspeed_10m_max[i])}k`}),m.innerText='OK'}catch(e){m.innerText='Err'}}</script>
