<!DOCTYPE html>
<html>
<head>
  <title>LiteWeather</title>
</head>
<body>
  <strong>3-Day Forecast</strong>
  <p id="m">Locating...</p>
  
  <table border="1" cellpadding="5">
    <thead>
      <tr>
        <th>Date</th>
        <th>Condition</th>
        <th>High/Low</th>
      </tr>
    </thead>
    <tbody id="o"></tbody>
  </table>

  <script>
    const m=document.getElementById('m'), o=document.getElementById('o');
    const W=(c)=>{
      const s={0:'Clear',1:'Mainly Clear',2:'Partly Cloudy',3:'Overcast',45:'Fog',51:'Drizzle',61:'Rain',71:'Snow',95:'Storm'};
      return s[c]||'Code:'+c;
    };

    navigator.geolocation.getCurrentPosition(async(p)=>{
      try {
        const {latitude:lt,longitude:lg}=p.coords;
        m.innerText=`Loc: ${lt.toFixed(2)}, ${lg.toFixed(2)}`;
        const r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lt}&longitude=${lg}&daily=weathercode,temperature_2m_max,temperature_2m_min&forecast_days=3&timezone=auto`);
        const d=await r.json();
        
        d.daily.time.forEach((t,i)=>{
          const row = o.insertRow();
          row.innerHTML = `<td>${t.slice(5)}</td><td>${W(d.daily.weathercode[i])}</td><td>${Math.round(d.daily.temperature_2m_max[i])}&deg; / ${Math.round(d.daily.temperature_2m_min[i])}&deg;</td>`;
        });
      } catch(e){m.innerText='Fetch error.';}
    }, ()=>m.innerText='GPS required.');
  </script>
</body>
</html>
