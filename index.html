<!DOCTYPE html><title>W</title><b>WX</b><br><input id=a placeholder=Lt size=3><input id=b placeholder=Lo size=3><button onclick=g()>Go</button><button onclick=n()>GPS</button><p id=m style=margin:2px></p><div id=h style=font-size:10px></div><table border=1 style=border-collapse:collapse;font-size:10px><tbody id=o></tbody></table><script>L=localStorage,a=document.getElementById('a'),b=document.getElementById('b'),a.value=L.la||'',b.value=L.lo||'',W=c=>({0:'SKC',1:'FEW',2:'SCT',3:'OVC',45:'FG',51:'DZ',61:'-RA',63:'RA',65:'+RA',71:'SN',95:'TS'}[c]||'C'+c),n=()=>(m.innerText='...',navigator.geolocation.getCurrentPosition(p=>{a.value=p.coords.latitude.toFixed(2),b.value=p.coords.longitude.toFixed(2),g()},()=>m.innerText='X')),g=async()=>{x=a.value,y=b.value,L.la=x,L.lo=y,m.innerText='...';try{r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${x}&longitude=${y}&current=apparent_temperature&hourly=temperature_2m,precipitation,precipitation_probability&daily=weathercode,temperature_2m_max,temperature_2m_min,precipitation_sum,precipitation_probability_max,windspeed_10m_max&timezone=auto&forecast_days=3`),j=await r.json(),m.innerText=`OK|Feels:${Math.round(j.current.apparent_temperature)}°`,o.innerHTML='<tr><th>D<th>W<th>T<th>P<th>K',h.innerHTML='',t=new Date().getHours();j.hourly.time.slice(t,t+24).map((_,i)=>{k=t+i,h.innerHTML+=`${j.hourly.time[k].slice(11,13)}00:${Math.round(j.hourly.temperature_2m[k])}°/${j.hourly.precipitation[k]}m/${j.hourly.precipitation_probability[k]}% `});j.daily.time.map((d,i)=>{r=o.insertRow(),r.innerHTML=`<td>${d.slice(8,10)}/${d.slice(5,7)}<td>${W(j.daily.weathercode[i])}<td>${Math.round(j.daily.temperature_2m_max[i])}/${Math.round(j.daily.temperature_2m_min[i])}<td>${j.daily.precipitation_sum[i]}@${j.daily.precipitation_probability_max[i]}%<td>${Math.round(j.daily.windspeed_10m_max[i])}`})}catch(e){m.innerText='Err'}}</script>
