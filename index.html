<!DOCTYPE html><title>W</title><b>3-Day</b><br><input id=a placeholder=Lat size=4><input id=b placeholder=Lon size=4><button onclick=g()>Go</button><button onclick=n()>GPS</button><p id=m></p><table border=1 style=border-collapse:collapse;font-size:12px><tbody id=o></tbody></table><script>L=localStorage,a=document.getElementById('a'),b=document.getElementById('b'),a.value=L.la,b.value=L.lo,W=c=>({0:'Clear',1:'Clear',2:'P.Cloud',3:'Over',45:'Fog',51:'Driz',61:'Rain',63:'Rain',71:'Snow',95:'Storm'}[c]||'C'+c),n=()=>(m.innerText='...',navigator.geolocation.getCurrentPosition(p=>{a.value=p.coords.latitude.toFixed(2),b.value=p.coords.longitude.toFixed(2),g()},()=>m.innerText='X')),g=async()=>{x=a.value,y=b.value,L.la=x,L.lo=y,m.innerText='...';try{r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${x}&longitude=${y}&daily=weathercode,temperature_2m_max,temperature_2m_min,precipitation_sum,precipitation_probability_max,windspeed_10m_max,sunrise,sunset&timezone=auto`),j=await r.json(),o.innerHTML='<tr><th>D<th>W<th>H/L<th>mm/%<th>k<th>Sun';j.daily.time.map((t,i)=>{r=o.insertRow(),p=t.split('-'),r.innerHTML=`<td>${p[2]}/${p[1]}<td>${W(j.daily.weathercode[i])}<td>${Math.round(j.daily.temperature_2m_max[i])}/${Math.round(j.daily.temperature_2m_min[i])}<td>${j.daily.precipitation_sum[i]}@${j.daily.precipitation_probability_max[i]}%<td>${Math.round(j.daily.windspeed_10m_max[i])}<td>${j.daily.sunrise[i].slice(-5)}-${j.daily.sunset[i].slice(-5)}`}),m.innerText='OK'}catch(e){m.innerText='Err'}}</script>
